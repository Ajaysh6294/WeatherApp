<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weather Application</title>
<link rel="stylesheet" th:href="@{/css/style.css}" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<style>
  body {
	font-family: Arial, sans-serif;
	text-align: center;
	padding: 20px;
	position: relative;
	min-height: 100vh;
}

#colorOptions {
	/* position: absolute; */
	bottom: 80px;
	left: 50%;
	/* transform: translateX(-50%); */
	display: flex;
	flex-direction: row;
	gap: 10px;
	margin: 10px 0 10px 10px;
}

.color-option {
	width: 20px;
	height: 20px;
	cursor: pointer;
	border-radius: 50%;
	border: 2px solid #000;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	font-size: 12px;
	color: white;
	font-weight: bold;
}
</style>
<body>
	<div class="mainContainer">
	<div th:if="${error}" class="alert alert-danger" role="alert">
    <span th:text="${error}"></span>
</div>
	
		<form action="/weather" method="post" class="searchInput">
			<input type="text" placeholder="Enter City Name" id="searchInput"
				name="city" required />
			<button id="searchButton">
				<i class="fa-solid fa-magnifying-glass"></i>
			</button>
		</form>
		<div class="weatherDetails">

			<div class="weatherIcon">
				<img th:src="@{/img/sun.png}" alt="Weather Icon" id="weather-icon" />
				<h2 th:text="${temperature} + ' Â°C'"></h2>
				<input type="hidden" id="wc" th:value="${weatherCondition}" />
			</div>

			<div class="cityDetails">
				<div class="desc">
					<strong th:text="${#strings.toUpperCase(city)}"></strong>
				</div>
				<div class="date" th:text="${date}"></div>
			</div>
			<div class="windDetails">
				<div class="humidityBox">
					<img th:src="@{/img/hum1.png}" alt="Loading...">
					<div class="humidity">
						<span>Humidity </span>
						<h2 th:text="${humidity} + '%' "></h2>
					</div>
				</div>
				<div class="windSpeed">
					<img src="/img/wind.png" alt="loading...">
					<div class="wind">
						<span>Wind Speed</span>
						<h2 th:text="${windSpeed} + ' km/h'"></h2>
					</div>
				</div>
			</div>
			<div id="colorOptions">
				<div class="color-option"
					style="background-color: #000000; border: 2px solid white;"
					onclick="changeColor('#000000')"></div>
				<div class="color-option" style="background-color: #FFFFFF;"
					onclick="changeColor('#FFFFFF')"></div>
			</div>
		</div>
	</div>
	<script>
	    document.addEventListener("DOMContentLoaded", function() {
	        var weatherIcon = document.getElementById("weather-icon");
	        var val = document.getElementById("wc").value;
			console.log('wc value '+val);
			console.log('weather-icon '+weatherIcon);
	        var iconMap = {
	            'Clouds': '/img/clouds.png',
	            'Clear': '/img/sun.png',
	            'Rain': '/img/rain.png',
	            'Mist': '/img/mist.png',
	            'Snow': '/img/snow.png',
	            'Haze': '/img/haze.png'
	        };
	
	        if (iconMap[val]) {
	            weatherIcon.src = iconMap[val];
	        }
	    });  
	    function changeColor(color) {
	    	console.log(color);
            document.querySelector(".mainContainer").style.backgroundColor = color;
            
		    let container = document.querySelector(".mainContainer");
		
			container.style.color = (color === "#000000") ? "white" : "black";

        } 
	</script>
</body>
</html>
